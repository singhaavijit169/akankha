{% load static tailwind_tags %}
<!DOCTYPE html>
<html class="h-full" lang="en">

<head>
    <title>Akankha Homeo | Book Appointment</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'appoint_app/css/messages.css' %}">
    {% tailwind_css %}
</head>

<body style="background-color: aliceblue;">
    <div class="flex min-h-full flex-col justify-center px-6 py-12 lg:px-8">
        <div class="message-container">
            {% if messages %}
            {% for message in messages %}
            <div
                class="message {% if message.tags == 'success' %}message-success{% elif message.tags == 'error' %}message-error{% endif %}">
                {{ message }}
            </div>
            {% endfor %}
            {% endif %}
        </div>
        <div class="sm:mx-auto sm:w-full sm:max-w-sm">
            <img class="mx-auto h-12 top-1 w-auto" src="{% static 'appoint_app/images/appoint-master-logo.png' %}"
                alt="Logo">
            <h2 class="mt-2 text-center text-2xl font-bold leading-9 tracking-tight text-blue-800">Book New Appointment
            </h2>
        </div>
        <div class="mt-1 sm:mx-auto sm:w-full sm:max-w-sm">
            <p class="mt-3 mb-2 space-x-1 text-center text-md text-red-500 font-bold">NB: Standards for Booking an
                Appointment:</p>
            <div
                class="mt-1 mb-1 space-x-1 w-full text-center text-sm text-black bg-gray-200 p-2 rounded-md font-semibold">
               
                <p class="font-bold text-left">- Appoint Fees of Rs. 500 is charged for every appointment.</p>
                <p class="font-bold text-left">- No refund or change in appoint date if patient is absent on the scheduled day & time.</p>

            </div>

            <div class="create-appointment-form-patient mt-1 sm:mx-auto sm:w-full sm:max-w-sm">
                <form class="space-y-4" action="{% url 'create-appointment-patient' %}" method="POST" id="myForm">
                    {% csrf_token %}
                    <select name="centre" id="centre" required
                        class="block w-full mb-2 mt-2 rounded-full border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                        <option disabled selected value>Select Centre</option>
                        <option value="Kakdwip">Kakdwip</option>
                        <option value="5_No_Hat">5 No. Hat</option>
                        <option value="Janakalyan_Sangha" disabled>South Sundarban Janakalyan Sangha</option>
                        <option value="Bharat_Sevasram" disabled>Bharat Sevasram (Lot No.8)</option>
                    </select>
                    <select name="patient_name" id="patient_name" required
                        class="block w-full mb-2 mt-2 rounded-full border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                        <option disabled selected value>Select Patient</option>
                        {% for i in patient %}
                        <option value="{{ i.id }}"> {{ i.first_name }} {{ i.last_name }}</option>
               
                        {% endfor %}
                        <option value="new">New Patient</option>
                    </select>

                    <div id="info" hidden>
                        <div class="row" id="name">
                            <div class="col">
                                <label for="first_name">First Name</label>
                                <input type="text" name="first_name" id="first_name" required
                                class="block w-full mb-2 mt-2 rounded-full border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                            </div>
                            <div id="col">
                                <label for="last_name">Last Name</label>
                                <input type="text" name="last_name" id="last_name" required  
                                class="block w-full mb-2 mt-2 rounded-full border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                            </div>
                        </div>
             
                        <div class="row">
                            <div class="col">
                                <label for="dob">Date of Birth</label>
                                <input type="date" name="dob" id="dob" required
                                class="block w-full mb-2 mt-2 rounded-full border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                            </div>   
                            <div class="col">
                                <input type="radio" id="Male" name="gender" required value="Male">
                                <label for="male">Male</label><br>
                                <input type="radio" id="Female" name="gender" value="Female">
                                <label for="css">Female</label><br>
                                <input type="radio" id="Other" name="gender" value="Other">
                                <label for="javascript">Other</label>
                            </div>
                        </div>
                        <label for="phone">Contact No.</label>
                        <input type="text" name="phone" id="phone" required 
                        class="block w-full mb-2 mt-2 rounded-full border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                    </div>
         


         
    
                    <div class="mt-5 flex justify-center">
                        <button type="submit"
                            class="relative w-full border-0 py-1.5 items-center justify-center bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 focus:outline-none focus:ring focus:ring-purple-300 active:bg-blue-700 rounded-full text-white font-semibold shadow-md transition duration-300 ease-in-out transform hover:scale-105">
                            Proceed for Slot Booking
                        </button>
                    </div>
                </form>
                <p class="mt-4 text-center text-sm text-gray-500">
                    Back to
                    <a href="/" class="font-semibold text-indigo-600 hover:text-indigo-500">Dashboard</a>
                </p>
            </div>
        </div>

        {% block scripts %}
        {% for i in patient %}
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const triggerInput = document.getElementById('patient_name');
                
    
                triggerInput.addEventListener('change', function() {
                    document.getElementById('info').removeAttribute('hidden')
            
                    if (triggerInput.value == '{{ i.id }}') {
                        
                        document.getElementById('first_name').value="{{i.first_name}}";
                        document.getElementById('last_name').value = '{{ i.last_name }}';
                        document.getElementById('dob').value="{{i.dob|date:'Y-m-d'}}";
                        document.getElementById('phone').value = '{{ i.phone_number }}';
                        document.getElementById('{{i.gender}}').checked = true
                        document.getElementById('name').setAttribute('hidden',true);
         
         
                    }

                    
                
                });
            });
        </script>
        {% endfor %}
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                triggerInput = document.getElementById('patient_name');

                
                triggerInput.addEventListener('change', function() {
                    if (triggerInput.value == 'new') {
                        document.getElementById('info').removeAttribute('hidden')
                        document.getElementById('name').removeAttribute('hidden');
                        document.getElementById('first_name').value='';
                        document.getElementById('last_name').value = '';
                        document.getElementById('dob').value='';   
         
                    }
                
                
                });
            });
        </script>
        {% endblock scripts %}
</body>

</html>