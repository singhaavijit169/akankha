{% load static tailwind_tags %}
<!DOCTYPE html>
<html class="h-full" lang="en">

<head>
    <title>Akankha Homeo | Create Appointment Slots</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'appoint_app/css/messages.css' %}">
    {% tailwind_css %}
</head>

<body style="background-color: aliceblue;">
    <div class="flex min-h-full flex-col justify-center px-6 py-12 lg:px-8">
        <div class="message-container">
            {% if messages %}
            {% for message in messages %}
            <div
                class="message {% if message.tags == 'success' %}message-success{% elif message.tags == 'error' %}message-error{% endif %}">
                {{ message }}
            </div>
            {% endfor %}
            {% endif %}
        </div>
        <div class="sm:mx-auto sm:w-full sm:max-w-sm">
            <img class="mx-auto h-12 top-1 w-auto" src="{% static 'appoint_app/images/appoint-master-logo.png' %}"
                alt="Logo">
            <h2 class="mt-2 text-center text-2xl font-bold leading-9 tracking-tight text-blue-800">Create Appointment
                Slots
            </h2>
        </div>
        <div class="mt-1 sm:mx-auto sm:w-full sm:max-w-sm">
            <p class="mt-3 mb-2 space-x-1 text-center text-md text-red-500 font-bold">
                Last Update on {{ last_update.date }}<br>
               From, {{last_update.from_date}} to {{last_update.to_date}}
             </p>
            
            <div
                class="mt-1 mb-1 space-x-1 w-full text-center text-sm text-black bg-gray-200 p-2 rounded-md font-semibold">
                <p class="font-bold text-left">- PLease make sure the&nbsp;<a href="{% url 'admin:appoint_app_schedule_changelist' %}"><u>schedules</u></a>&nbsp;are up to date before making slots.&nbsp;</p>
                
                <p class="font-bold text-left">- You can&nbsp;<a href="{% url 'admin:appoint_app_slot_changelist' %}"><u>manage</u></a>&nbsp; the slots anytime from Dashboard.</p>
          
            </div>


        <div class="create-appointment-form-patient mt-1 sm:mx-auto sm:w-full sm:max-w-sm">
            <form class="space-y-4" action="{% url 'create-auto-slot' %}" method="post">
                {% csrf_token %}
                {% for field in form %}
                <div>
                    {{ field.label_tag }}
                    {% if field.name == 'from_date' %}
                    <input type="date" name="{{ field.name }}" id="from_date" onchange="myFunction()" min="{{next_date|date:'Y-m-d'}}" value="{{next_date|date:'Y-m-d'}}" class="block w-full mb-2 mt-2 rounded-full border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                    {% endif %}
                    {% if field.name == 'to_date' %}
                    <input type="date" name="{{ field.name }}" id="to_date"  onchange="myFunction2()" min="{{next_date|date:'Y-m-d'}}" class="block w-full mb-2 mt-2 rounded-full border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                    {% endif %}
             
                    {% if field.errors %}
                        <div class="text-red-500 text-sm mt-1 text-semibold">
                            {% for error in field.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            {% endfor %} 
		  
            
                 
            
                <div class="mt-5 flex justify-center">
                    <button type="submit"
                        class="relative w-full border-0 py-1.5 items-center justify-center bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 focus:outline-none focus:ring focus:ring-purple-300 active:bg-blue-700 rounded-full text-white font-semibold shadow-md transition duration-300 ease-in-out transform hover:scale-105">
                        Create Slots
                    </button>
                </div>
            </form>
            <p class="mt-4 text-center text-sm text-gray-500">
                Back to
                <a href="/" class="font-semibold text-indigo-600 hover:text-indigo-500">Dashboard</a>
            </p>
        </div>
    </div>

    <script>
        function myFunction(){
        to_date = document.getElementById("from_date").value;
        document.getElementById("to_date").setAttribute("min",to_date);
 
        }
        function myFunction2(){
        from_date = document.getElementById("to_date").value;
        document.getElementById("from_date").setAttribute("max",from_date);
 
        }
    </script>
</body>

</html>